<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Measuring Ruby</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/sky.css" id="theme">
    <link rel="stylesheet" href="css/custom.css">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h1>GoGaRuCo Measuring Ruby</h1>
          <br />
          <br />
          <h3>ThredUP - Sept 2013</h3>
          <p>
          <small>Presented by Kerrie Yee &amp; Charles Wang</small>
          </p>
        </section>

        <section>
          <section>
            <h2>Front End Performance</h2>
            <br />
            <p>
              We should focus on the front end performance first before looking at the server side.
            </p>
            <br />
            <img src="http://stevesouders.com/images/golden-waterfall.png" alt="" />
          </section>

          <section>
            <h2>Basic Tools</h2>
            <ul>
              <li>WEBPAGETEST</li>
              <li>YSlow</li>
              <li>Google Page Speed</li>
            </ul>
          </section>

          <section>
            <h2>WEBPAGETEST</h2>
            <br />
            <br />
            <a href="http://www.webpagetest.org/result/131016_K3_SW9/" target='_blank'>Lets see how <span class='underline'>ThredUP</span> does!</a>
            <a href="http://www.webpagetest.org/result/131017_SK_QCG/" target='_blank'>Shop</a>
          </section>

          <section>
            <h2>YSlow</h2>
            <br />
            <img src="http://pietbos.me/wp-content/uploads/2010/09/yslow.jpg" alt="" />
            <br />
            <br />
            <p>Yahoo!'s performance tool for the browser.</p>
          </section>

          <section>
            <h2>Google Page Speed</h2>
            <br />
            <img src="http://searchengineland.com/figz/wp-content/seloads/2012/10/Google-page-speed-service.jpeg" alt="" />
            <br />
            <br />
            <p>Similar to YSlow.</p>
            <p>Has many of the same features.</p>
            <p>Lets take a quick look!</p>
          </section>

          <section>
            <h2>TIP:</h2>
            <br />
            <h4>Move the javascript to the <em class='underline'>bottom</em></h4>
            <br />
            <img src="http://i.imgur.com/4TTEeSf.gif" alt="bottom" />
          </section>

          <section>
            <h2>Suggested Improvements for Web</h2>
            <ul>
              <li class="fragment">Remove any third party widgets we don't need</li>
              <li class="fragment">First Time to Byte can be pretty hefty</li>
              <li class="fragment">Keep the requests as few and as small as possible(ideally less than 1500bytes)</li>
              <li class="fragment">Compress Images further</li>
            </ul>
            <aside class="notes">You should see a benefit for any image file that can be reduced by 25 bytes or more</aside>
          </section>
          <section>
            <h2>Things to think about for Mobile Web</h2>
            <ul>
              <li class="fragment">Load images through CSS background-images when possible</li>
              <li class="fragment">Less HTTP requests</li>
              <li class="fragment">Widgets are super expensive</li>
              <li class="fragment">Less JS is better</li>
            </ul>
            <img src="http://cdn.sheknows.com/articles/2013/08/JULES/GIFS/yGk9W.gif" alt="" />
          </section>

          <section>
            <h2>On to Ruby</h2>
            <img src="http://zohararad.github.io/presentations/falling-in-love-with-ruby/presentation/images/ruby.png" alt="" />
          </section>
        </section>

        <section>
          <section>
            <h2>Measuring</h2>
            <br />
            <p>
              Always be measuring!
            </p>
            <br />
            <img src="http://s3-ec.buzzfed.com/static/enhanced/webdr02/2012/11/8/18/anigif_enhanced-buzz-31182-1352416174-1.gif" alt="" />
          </section>
          <section>
            <h2>Problem:</h2>
            <br />
            <h3>Run Away CPU with a Ruby Process</h3>
            <img src="http://images.betterphoto.com/0026/0601161152541supercpu_copy.jpg" alt="" />
          </section>

          <section>
            <h2>Solution:</h2>
            <ul>
              <li>Ruby 2.0's dtrace probes</li>
              <li>rbtrace gem</li>
            </ul>
          </section>

          <section>
            <h2>Old School Instrumentation</h2>
            <pre>
              <code>
              def print_duration(name)
                start = Time.now
                result = yield
                total = (Time.now - start) * 1000
                puts "#{name}: #{total.to_i}ms"
                result
              end

              alias_method :some_method_old, :some_method

              def some_method(*args, &blk)
                print_duration("something") do
                  some_method(*args, &blk)
                end
              end
              </code>
            </pre>
          </section>

          <section>
            <h2>Benchmarking</h2>
            <p>Tool used to record measurements</p>
            <p>Run your code n-times and see how long it takes</p>
            <br />
            <img src="http://www.illpumpyouup.com/articles/images/arnold-chest.gif" alt="" />
          </section>

        </section>

        <section>
          <section>
            <h2>Rack Mini Profiler</h2>
            <p>Lets just dig into it!</p>
          </section>

          <section>
            <h2>What we should be looking out for?</h2>
            <ol>
              <li>Look between the gaps</li>
              <li>Queries that shouldn't run</li>
              <li>Queries that are taking too long</li>
              <li>Too much data in the select</li>
              <li>Repeated Queries (n+1)</li>
            </ol>
          </section>
        </section>

        <section>
          <h2>Fin</h2>
          <img src="http://i50.photobucket.com/albums/f324/ann1024/DevelopersAreBornBrave_Small.jpg" alt="" />
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>

  </body>
</html>
